
\documentclass[./Thick_TQFTs_and_Quantum_Information.tex]{subfiles}

\begin{document}

\section{Category of Connections}

We now make precise the notion of a category of ``parallel transport machinery''
as mentioned in the previous section. For a vector bundle $\pi_E : E \to M$, we
write $\Gamma(E)$ to denote the set\footnote{We are not using any sheaf theory,
yet.} of sections of the bundle. We recall that a connection on $E$ is a
function
\[
  \nabla : \Gamma(TM \tensor E) \to \Gamma(E)
\]
satisfying some algebraic properties that are not important at the moment.
Suppose we have another bundle $\pi_{E'} : E \to M$ with a bundle morphism
$f = (u, v) : E \to E'$ -- a pair of maps $u : M \to M'$ and $v : E \to E'$
with $v$ linear on each fibres of $E$, making the following diagram commute:
\[\begin{tikzpicture}[baseline=(a).base]
\node[scale=\diagscale] (a) at (0, 0){
\begin{tikzcd}
E \ar[d, "\pi_E" left] \ar[r, "v" above] & E' \ar[d, "\pi_{E'}" right]\\
M \ar[r, "u" below] & M'
\end{tikzcd}
};
\end{tikzpicture}\]
The derivative of $u$ induces a bundle morphism
$(du \tensor v, u) : TM \tensor E \to TM' \tensor E'$, where
$(du \tensor v)(x \tensor y) = du(x) \tensor v(x)$ for $x \in TM$ and
$y \in E$. If, in addition, $f$ has an inverse $f^{-1} = (u^{-1}, v^{-1})$,
we have an induced mapping
$\wh{f} : \Gamma(TM' \tensor E') \to \Gamma(TM \tensor E)$ given, for each $s
\in \Gamma(TM' \tensor E')$, by the composite:
\[\begin{tikzpicture}[baseline=(a).base]
\node[scale=\diagscale] (a) at (0, 0){
\begin{tikzcd}[column sep=55, row sep=large]
TM \tensor E &
TM' \tensor E' \ar[l, "d(u^{-1}) \tensor v^{-1}" above]\\
M \ar[u, "\wh{f}(s)" left] \ar[r, "u" below]
& M' \ar[u, "s" right]
\end{tikzcd}
};
\end{tikzpicture}\]
Note that $d(u^{-1}) = (du)^{-1}$ so we will unambiguously write $du^{-1}$ from
this point. Now, $\nabla(\wh{f}(s))$ is a section of $E$ while
$(f \odot \nabla)(s) := v\nabla(\wh{f}(s))u^{-1}$ is a section of $E'$:
\[\begin{tikzpicture}[baseline=(a).base]
\node[scale=\diagscale] (a) at (0, 0){
\begin{tikzcd}[column sep=large, row sep=large]
E \ar[r, "v" above] &
E'\\
M \ar[u, "\nabla(\wh{f}(s))" left] &
M' \ar[u, "(f \odot \nabla)(s)" right] \ar[l, "u^{-1}" below]
\end{tikzcd}
};
\end{tikzpicture}\]
This yields a function:
\[\begin{array}{ccccl}
f \odot \nabla
&:& \Gamma(TM' \tensor E') &\to& \Gamma(E) \\
&:& X \tensor s &\mapsto&
    v\nabla((du^{-1} \tensor v^{-1})(X \tensor s)u)u^{-1} \\
& &             & = & v\nabla(du^{-1}Xu \tensor v^{-1}su)u^{-1}
\end{array}\]
In the last equality, we used the fact that
\[
  (X \tensor s)u = Xu \tensor su
\]
which follows from the definition of the tensor product of bundles. Using this
construction, we will define our desired double category.

\subsection{Bundle Isomorphisms Transform Connections}

We wish to show that $f \odot \nabla$ is a connection. For this, we recall the
properties of a connection. Let $\pi_E : E \to M$ be a vector bundle as before
with $X, Y \in \Gamma(TM)$, $s, t \in \Gamma(E)$, $r \in C^{\infty}(M, \R)$.
Then, $\nabla : \Gamma(TM \tensor E) \to \Gamma(E)$ is a conneciton if and only
if the following hold:
\[\begin{array}{lll}
\nabla((X + Y) \tensor s) &= \nabla(X \tensor s) + \nabla(Y \tensor s)
  & (\text{Additivity in $\Gamma(TM)$}) \\
\nabla(X \tensor (s + t)) &= \nabla(X \tensor s) + \nabla(X \tensor t)
  & (\text{Additivity in $\Gamma(E)$}) \\
\nabla((r \cdot X) \tensor s) &= r \cdot \nabla(X \tensor s)
  & (\text{Scalar-multiplicativity in $\Gamma(TM)$}) \\
\nabla(X \tensor (r \cdot s)) &= dr(X) \cdot s + r \cdot \nabla(X \tensor s)
  & (\text{Leibniz property in $\Gamma(E)$}) \\
\end{array}\]
\begin{rmk}
The map $dr(X)$ in the Leibniz property is defined as follows. If $r : M \to \R$
is a smooth function, then we have $dr : TM \to T\R$, where
$\pi_{T\R} : T\R \to \R$ is the tangent bundle on $\R$. Given a section
$X : M \to TM$, we obtain a smooth map $drX : M \to T\R$. As a result, $drX$
yields a smooth map $dr(X) := \pi_{T\R}drX : M \to \R$. That is, the derivative
$dr$ yields a map
\[
  dr : \Gamma(TM) \to C^{\infty}(M, \R)
\]
which is the one in Leibniz property above.
\end{rmk}

Now, let $X, Y \in \Gamma(TM')$, $s \in \Gamma(E')$, $r \in C^{\infty}(M', \R)$.
We recall some basic identities that will be of use in showing that
$f \odot \nabla$ is a connection:
\begin{align*}
(X + Y)u &= Xu + Yu && \text{by definition of pointwise addition} \\
(r \cdot X)u &= (ru) \cdot Xu && \text{by definition of pointwise scaling} \\
v(X + Y) &= vX + vY && \text{fibre-wise linearity of $v$} \\
v(r \cdot X) &= r \cdot vX && \text{fibre-wise linearity of $v$}
\end{align*}
We note that these identities hold for arbitrary bundle morphisms $(u, v)$,
smooth real-valued maps $r$ and sections $X, Y$, as long as the operations are
well-defined.

We now proceed to check that $f \odot \nabla$ is a connection. To this end, we
first check additivity in the $\Gamma(TM')$ coordinate.
\begin{align*}
(f \odot \nabla)((X + Y) \tensor s)
=& v\nabla(du^{-1}(X + Y)u \tensor v^{-1}su)u^{-1} \\
=& v\nabla((du^{-1}Xu + du^{-1}Yu) \tensor v^{-1}su)u^{-1} \\
=& v(\nabla(du^{-1}Xu \tensor v^{-1}su)
 + \nabla(du^{-1}Yu \tensor v^{-1}su))u^{-1} \\
=& v\nabla(du^{-1}Xu \tensor v^{-1}su)u^{-1}
 + v\nabla(du^{-1}Yu \tensor v^{-1}su))u^{-1} \\
=& (f \odot \nabla)(X \tensor s) + (f \odot \nabla)(Y \tensor s)
\end{align*}
Additivity in the $\Gamma(E')$ coordinate is similar. So, we check scalar
multiplicativity in the $\Gamma(TM')$ coordinate:
\begin{align*}
(f \odot \nabla)(r \cdot X \tensor s)
=& v\nabla(du^{-1}(r \cdot X)u \tensor v^{-1}su)u^{-1} \\
=& v\nabla(du^{-1}(ru \cdot Xu) \tensor v^{-1}su)u^{-1} \\
=& v\nabla((ru \cdot (du^{-1}Xu)) \tensor v^{-1}su)u^{-1} \\
=& v (ru \cdot \nabla(du^{-1}Xu \tensor v^{-1}su))u^{-1} \\
=& v (ruu^{-1} \cdot \nabla(du^{-1}Xu \tensor v^{-1}su)u^{-1}) \\
=& r \cdot (v\nabla(du^{-1}Xu \tensor v^{-1}su)u^{-1}) \\
=& r \cdot ((f \odot \nabla)(X \tensor s))
\end{align*}

We finally check the Liebnitz rule.
\begin{align*}
(f \odot \nabla)(X \tensor (r \cdot s))
=& v\nabla(du^{-1}Xu \tensor v^{-1}(r \cdot s)u)u^{-1} \\
=& v(\nabla(du^{-1}Xu \tensor v^{-1}(ru \cdot su))u^{-1} \\
=& v\nabla(du^{-1}Xu \tensor ru \cdot (v^{-1}su))u^{-1} \\
=& v(
      d(ru)(du^{-1}Xu) \cdot v^{-1}su
      + ru \cdot \nabla(du^{-1}Xu \tensor v^{-1}su)
    )u^{-1} \\
=& v(d(ru)(du^{-1}Xu) \cdot v^{-1}su)u^{-1}
 + v(ru \cdot \nabla(du^{-1}Xu \tensor v^{-1}su))u^{-1}
\end{align*}
It now suffices to show that the left summand is
\[
  dr(X) \cdot s
\]
and the right summand is
\[
  r \cdot (f \odot \nabla)(X \tensor s)
\]
For the right summand, we observe:
\begin{align*}
 & v(ru \cdot \nabla(du^{-1}Xu \tensor v^{-1}su))u^{-1} \\
=& v(ruu^{-1} \cdot \nabla(du^{-1}Xu \tensor v^{-1}su)u^{-1}) \\
=& v(r \cdot \nabla(du^{-1}Xu \tensor v^{-1}su)u^{-1}) \\
=&r \cdot (v\nabla(du^{-1}Xu \tensor v^{-1}su)u^{-1}) \\
=& r \cdot (f \odot \nabla)(X \tensor s)
\end{align*}
For the left summand, we first observe a useful property of the derivative
operator $d-$. If $g : L \to M$ and $h : M \to N$ are smooth maps, then by the
pasting of pushout diagrams to give pushout diagrams, we have
\[
  d(h \circ g) = dh \circ dg
\]
Then, we have:
\begin{align*}
v(d(ru)(du^{-1}Xu) \cdot v^{-1}su)u^{-1}
=& v(\pi_{T\R}d(ru)(du^{-1}Xu) \cdot v^{-1}su)u^{-1}\\
=& v(\pi_{T\R}d(ruu^{-1})Xu \cdot v^{-1}su)u^{-1}\\
=& v(\pi_{T\R}drXu \cdot v^{-1}su)u^{-1}\\
=& v((\pi_{T\R}drX \cdot v^{-1}s)u)u^{-1}\\
=& v(v^{-1}(\pi_{T\R}drX \cdot s)u)u^{-1}\\
=& dr(X) \cdot s
\end{align*}
as required. This completes the proof of the following theorem.
\begin{thm}
Let $\pi : E \to M$, $\pi' : E' \to M'$ be bundles with a bundle isomorphism
$f = (u, v) : E \to E'$. If $\nabla$ is a connection on $\pi$, then
$f \odot \nabla$ is a connection on $\pi'$.
\end{thm}
\begin{defn}
We call $f \odot \nabla$ the shift of $\nabla$ along $f$ and say that $f$
takes $\nabla$ to $f \odot \nabla$. From this point, we write $f\nabla$ as
opposed to $f \odot \nabla$, whenever there is no confusion.
\end{defn}

\subsection{Category of Connections}

Let $\pi_i : E_i \to M_i$ be a bundles equipped with a connections $\nabla_i$
for $i \in \set{1, 2, 3, 4}$. Let $f_{i, i + 1} = (u_{i, i + 1}, v_{i, i + 1})$
be bundle isomorphisms for $i \in \set{1, 2, 3}$. Then, the composite
$f_{1, 3} := f_{2, 3}f_{1, 2} = (u_{2, 3}u_{1, 2}, v_{2, 3}v_{1, 2})
=: (u_{1, 3}, v_{1, 3})$ is clearly a bundle isomorphism. We similarly define
composites $f_{i, j}$ for each $i < j \in \set{1, 2, 3, 4}$. Now, suppose
$\nabla_{i + 1} = f_{i, i + 1}\nabla_i$ for each $i \in \set{1, 2, 3}$. Then, we
immediately have
\[
  f_{i, k}\nabla_i = f_{j, k}f_{i, j}\nabla_i = f_{j, k}\nabla_j = \nabla_k
\]
for each $i < j < k$ in $\set{1, 2, 3, 4}$. In particular,
\[
  f_{3, 4}(f_{2, 3}f_{1, 2}\nabla_1) = \nabla_4
    = (f_{3, 4}f_{2, 3})f_{1, 2}\nabla_1
\]

We then observe the action of identity bundle morphisms. The identity bundle
morphism on $\pi_1$ is the pair $\id_{\pi_1} = (\id_{E_1}, \id_{M_1})$. Then,
\begin{align*}
   \id_{\pi_1}\nabla_1(X \tensor s)
&= \id_{E_1}\nabla_1(d(\id_{M_1})^{-1}X\id_{M_1}
                     \tensor \id_{E_1}^{-1}s\id_{M_1})\id_{M_1}^{-1} \\
&= \nabla_1(\id_{TM_1}^{-1}X \tensor s) \\
&= \nabla_1(X \tensor s)
\end{align*}
so that $\id_{\pi_1}\nabla = \nabla$. We finally observe that
$ff^{-1}\nabla = \id\nabla = \nabla$ for any connection $\nabla$ and any
compatible diffeomorphism $f$.

These observations motivate the following definition.
\begin{defn}
Let $\pi_1$ and $\pi_2$ be bundles equipped with connections $\nabla_1$ and
$\nabla_2$ respectively. Then, a bundle isomorphism
$f = (u, v) : \pi_1 \to \pi_2$ satisfying $f\nabla_1 = \nabla_2$ is called an
isomorphism, or simply morphism, of connections.
\end{defn}

From the work above, we have established the following results.
\begin{thm}
There exists a groupoid, denoted $\Conn$, whose objects are connections and
whose morphisms are isomorphisms of connections.
\end{thm}
\begin{defn}[Category of Connections]
We will call the category of the above function the category or groupoid of
connections. We will denote this category $\Conn$.
\end{defn}

We now try to establish a monoidal structure for a subcategory of the category
of connections. Let $\nabla_1$ and $\nabla_2$ be two connections with underlying
bundles $\pi_1 : E_1 \to M_1$ and $\pi_2 : E_2 \to M_2$ respectively. We will
consider the coproduct or disjoint union of these bundles in the category of
manifolds. There exists a smooth map
$\pi_1 \amalg \pi_2 : E_1 \amalg E_2 \to M_1 \amalg M_2$ which we will give the
structure of a vector bundle as follows. For this, we additionally assume that
the fibres of $E_1$ and $E_2$ are the same vector space. Let
$U = U_1 \amalg U_2, V = V_1 \amalg V_2$ be open sets in $M_1 \amalg M_2$ with
$U_i, V_i \subset M_i$ for $i \in \set{1, 2}$, and consider
$(U_1 \amalg U_2) \cap (V_1 \amalg V_2) = (U_1 \cap V_1) \amalg (U_2 \cap V_2)$.
We have a transition function $G_{U_1, V_1}$ on $U_1 \cap V_1$ from the bundle
$\pi_1$ and one $H_{U_2, V_2}$ on $U_2 \cap V_2$ from $\pi_2$. We define a
function $(G \amalg H)_{U, V} : U \cap V \to \GL_n(\C)$ piecewise, as
follows:
\[
  (G \amalg H)_{U, V}(x) := \begin{cases}
    G_{U_1, V_1}(x), & x \in U_1 \cap V_1 \subset M_1 \\
    H_{U_2, V_2}(x), & x \in U_2 \cap V_2 \subset M_2
  \end{cases}
\]
which is smooth since it is a disjoint union of smooth functions. Therefore,
\[
  G \amalg H := \set[(G \amalg H)_{U, V}]
                    {U, V \subset M_1 \amalg M_2 \text{ are open}}
\]
is a vector bundle structure on $\pi_1 \amalg \pi_2$. A section of
$E_1 \amalg E_2$ is a smooth map
\[
  s : M_1 \amalg M_2 \to E_1 \amalg E_2
\]
satisfying $(\pi_1 \amalg \pi_2)s = \id_{M_1 \amalg M_2}$. We note that this
guarantees that the $s = s_1 \amalg s_2$ where $s_i$ is a section of
$E_i$, $i \in \set{1, 2}$.

Similarly, $TM_1 \amalg TM_2 \to M_1 \amalg M_2$ is a vector bundle when $M_1$
and $M_2$ have the same dimension, and we can take this to be the definition of
the tangent bundle $T(M_1 \amalg M_2)$ on $M_1 \amalg M_2$. Now, let
$\pi_3 : E_3 \to M_3$ be another bundle where all the $E_i$ have the same fibres
and all the $M_i$ are equidimensional.

We can pick a convention for disjoint unions of sets as follows:
\[
  A \amalg B = (A \times \set{0}) \cup (B \times \set{1})
\]
Under this convention,
\[
  E_1 \amalg (E_2 \amalg E_3)
    = \set[(x_1, 0)]{x_1 \in E_1}
      \cup \set[((x_2, 0), 1)]{x_2 \in E_2}
      \cup \set[((x_3, 1), 1)]{x_3 \in E_3}
\]
and
\[
  (E_1 \amalg E_2) \amalg E_3
    = \set[((x_1, 0), 0)]{x_1 \in E_1}
      \cup \set[((x_2, 1), 0)]{x_2 \in E_2}
      \cup \set[(x_3, 1)]{x_3 \in E_3}
\]
We have similar descriptions for the two distinct parenthesizations for
$M_1 \amalg M_2 \amalg M_3$. Now, the map
\[
  \alpha_{E_1, E_2, E_3} : E_1 \amalg (E_2 \amalg E_3)
                           \to (E_1 \amalg E_2) \amalg E_3
\]
defined by
\[
  (x_1, 0) \mapsto ((x_1, 0), 0),
  ((x_2, 0), 1) \mapsto ((x_2, 1), 0),
  ((x_3, 1), 1) \mapsto (x_3, 1)
\]
is easily seen to be bijective and fibre-preserving. Smoothness and naturality
in the subscripts follow from those of associators in $\Man$. We can make a
similar argument for similarly defined unitors $\rho_E$ and $\lambda_E$. We thus
have the following theorem.
\begin{thm}
The subcategory of the category of bundles consisting of bundles with base
spaces of a fixed dimension $d$ and total spaces with equal fibres is monoidal
under the disjoint union of manifolds.
\end{thm}
\begin{defn}[Category of {$(V, d)$--bundles}]
The subcategory of the category of bundles in the above theorem is called the
category of $V$--fibred bundles on $d$--dimensional manifolds or of
$(V, d)$--bundles and is denoted $\Bun^V_d$.
\end{defn}

We now define a function
\[
  \nabla_1 \amalg \nabla_2
    : \Gamma(T(M_1 \amalg M_2) \tensor E_1 \amalg E_2)
    \to \Gamma(E_1 \amalg E_2)
\]
as follows, for $i \in \set{0, 1}$:
\[
  (\nabla_1 \amalg \nabla_2)((X_1 \amalg X_2) \tensor (s_1 \amalg s_2))(x, i)
    = \nabla_{i + 1}(X_{i + 1} \tensor s_{i + 1})(x)
\]
It is easy to see that this function satisfies the connection identities
piecewise so that it satisfies these identities on its entire domain. Thus,
$\nabla_1 \amalg \nabla_2$ is a connection. We then consider a connection
$\nabla_3$ on $\pi_3$. Letting
$f = (u, v) = (\alpha_{M_1, M_2, M_3}, \alpha_{E_1, E_2, E_3})$, we now wish to
verify that
\[
  f(\nabla_1 \amalg (\nabla_2 \amalg \nabla_2))
    = (\nabla_1 \amalg \nabla_2) \amalg \nabla_3
\]
For this, we will need to inspect the expression:
\begin{align*}
  & f(\nabla_1 \amalg (\nabla_2 \amalg \nabla_2))(
      (X_1 \amalg X_2) \amalg X_3
      \tensor (s_1 \amalg s_2) \amalg s_3
      ) \\
  =& v(\nabla_1 \amalg (\nabla_2 \amalg \nabla_3))\br{
    du^{-1}((X_1 \amalg X_2) \amalg X_3)u
    \tensor v^{-1}((s_1 \amalg s_2) \amalg s_3)u
  }u^{-1} \\
  =& v(\nabla_1 \amalg (\nabla_2 \amalg \nabla_3))\br{
    du^{-1}((X_1 \amalg X_2) \amalg X_3)u
    \tensor (s_1 \amalg (s_2 \amalg s_3))
  }u^{-1}
\end{align*}
We then observe the following basic fact.
\begin{lem}
For tangent bundles $\pi : TM_i \to M_i$, $i \in \set{1, 2, 3}$, we have
$d\alpha_{M_1, M_2, M_3} = \alpha_{TM_1, TM_2, TM_3}$.
\end{lem}
\begin{proof}
We denote $\alpha_{TM} := \alpha_{TM_1, TM_2, TM_3}$,
$\alpha_{M} := \alpha_{M_1, M_2, M_3}$.
Let $R$ be a manifold, and $x$ and $y$, smooth maps making the following
diagram commute:
\[\begin{tikzpicture}[baseline=(a).base]
\node[scale=\diagscale] (a) at (0, 0){
\begin{tikzcd}[column sep=large, row sep=huge]
&
(TM_1 \amalg TM_2) \amalg TM_3
  \ar[d, "\pi_{(12)3}" description]
  \ar[rrd, "x" above right] & \\
TM_1 \amalg (TM_2 \amalg TM_3)
  \ar[ur, "\alpha_{TM}" above left]
  \ar[dr, "\pi_{1(23)}" below left] &
(M_1 \amalg M_2) \amalg M_3
  \ar[rr, "y\alpha_{M}^{-1}" description, dashed] & &
R \\ &
M_1 \amalg (M_2 \amalg M_3)
  \ar[u, "\alpha_{M}" description]
  \ar[urr, "y" below right] &
\end{tikzcd}
};
\end{tikzpicture}\]
The map $y\alpha_M^{-1}$ satisfies $(y\alpha_M^{-1})\alpha_M = y$ and
$(y\alpha_M^{-1})\pi_{(12)3} = y\pi_{1(23)}\alpha_{TM} = x$. Suppose another map
$r$ satisfies $r\alpha_M = y$. Then, $r = y\alpha_M^{-1}$ showing that
$y\alpha_M^{-1}$ is unique.

Therefore, $\alpha_{TM}$ makes the part of the diagram excluding $R$ a pushout
and hence must be $d\alpha_M$, by the uniqueness of the derivative.
\end{proof}

The above theorem yields:
\begin{align*}
  & f(\nabla_1 \amalg (\nabla_2 \amalg \nabla_2))(
      (X_1 \amalg X_2) \amalg X_3
      \tensor (s_1 \amalg s_2) \amalg s_3
      ) \\
  =& v(\nabla_1 \amalg (\nabla_2 \amalg \nabla_3))\br{
    du^{-1}((X_1 \amalg X_2) \amalg X_3)u
    \tensor (s_1 \amalg (s_2 \amalg s_3))
  }u^{-1}\\
  =& v(\nabla_1 \amalg (\nabla_2 \amalg \nabla_3))\br{
    (X_1 \amalg (X_2 \amalg X_3))
    \tensor (s_1 \amalg (s_2 \amalg s_3))
  }u^{-1} \\
  =& \alpha_{TM_1, TM_2, TM_3}(\nabla_1 \amalg (\nabla_2 \amalg \nabla_3))\br{
    (X_1 \amalg (X_2 \amalg X_3))
    \tensor (s_1 \amalg (s_2 \amalg s_3))
  }\alpha_{M_1, M_2, M_3}^{-1}
\end{align*}
where the last expression is easily seen to be
\[
  ((\nabla_1 \amalg \nabla_2) \amalg \nabla_3)(
    (X_1 \amalg X_2) \amalg X_3 \tensor (s_1 \amalg s_2) \amalg s_3
  )
\]
We can similarly show that the unitors in $\Man$ yield unitors for disjoint
unions of connections of bundles with equal fibres and equidimensional base
spaces. We have thus proved the following theorem.
\begin{thm}
For a vector space $V$ and a non-negative integer $d$, the subcategory of the
category of connections consisting of all connections on objects in
$\Bun_d^{V}$ and all morphisms of connections between them is a monoidal
category under disjoint union.
\end{thm}
\begin{defn}[Category of {$(V, d)$}--Connections]
We call the subcategory of the category of connections in the above theorem the
category of connections on $V$--fibred bundles on $d$--dimensional manifolds or
of $(V, d)$--connections. We denote this category $\Conn^V_d$.
\end{defn}

\TODO{We need a notion of gluing connections.}

\end{document}

